Phase 0：规范与骨架
------------------
Step 1 — 统一证据包规范（Spec-first）
交付：
- spec/evidence_bundle.md：目录结构、事件字段、事件类型、隐私声明
- 一个“最小样例 bundle”（手工生成也可）
验证：
- 能清楚解释：三端怎么输出同一格式、第三方怎么验证

Step 2 — Rust Core：Session + JSONL 写入（无防篡改）
交付：
- start_session(save_dir)：创建 Evidence_*
- append_event(type,payload)：写 events.jsonl、seq++
- stop_session()：写 session end
验证：
- 运行 demo：Start→写2条→Stop
- 文件落地正确：session.json、events.jsonl

Step 3 — Rust Verifier v0：结构 + seq 连续
交付：
- aegis-verifier verify <bundle_path> 输出 PASS/FAIL
- --json（可选先不做，后面做）
验证：
- 原始 PASS
- 删一行 events → FAIL，并指出 seq 断点


Phase 1：三平台采集最小对齐
--------------------------
Step 4 — 三端 Collector MVP：只接 Start/Stop
交付：
- macOS/Windows/Linux 各一个最小可运行 collector（哪怕 CLI）
- Start/Stop 调 core 生成 bundle
验证：
- 三端都能生成 bundle，verifier PASS

Step 5 — 三端前台应用/窗口焦点（统一事件 app_focus_changed）
交付：
- 三端都能写 app_focus_changed
验证：
- 切换 3 个应用（浏览器/编辑器/终端）
- events.jsonl 出现事件（3 端都要）
备注：
- Linux 桌面环境差异大，先选定一个目标环境跑通（例如 Ubuntu GNOME）


Phase 2：防篡改与可复现（先让证据“站得住”）
----------------------------------------
Step 6 — 防篡改 MVP：哈希链（跨平台一致算法）
交付：
- events 每行加入 prev_hash/hash
- session 结束写 final_hash（manifest 也记录）
验证：
- 原始 PASS
- 改一字符 → verifier FAIL，定位断链点

Step 7 — Verifier v1：哈希链 + 文件存在校验
交付：
- verifier 校验 hash chain
- 校验 files/ 文件存在性
验证：
- 删除录屏文件/截图文件 → FAIL


Phase 3：屏幕证据（三端分别实现，但统一 file_added 事件）
----------------------------------------------------
Step 8 — macOS 录屏 MVP（先能录出文件）
交付：
- 输出 files/screen.*
- 写事件 file_added { rel_path:"files/screen.mp4", kind:"screen_recording" }
验证：
- 视频可播放
- verifier PASS

Step 9 — Windows 录屏 MVP
交付与验证同 Step 8（输出可为 mp4/mkv/mov，rel_path 与 kind 统一）

Step 10 — Linux 录屏 MVP
交付与验证同 Step 8


Phase 4：证据质量提升（跨平台统一事件，平台实现逐步增强）
--------------------------------------------------
Step 11 — 截图/关键帧（shots）
交付：
- files/shots/000001.jpg...
- shot_saved 事件
验证：
- shots 数量与日志一致
- verifier PASS

Step 12 — 输入元数据统计（不存明文）
交付：
- input_stats 事件（每 10s 或 30s 汇总一次）
- 仅计数/分布，不写明文
验证：
- 打字/粘贴 → 有统计
- 日志无明文
- verifier PASS

Step 13 — 网络域名级（后置、最难）
交付：
- net_domain 事件
- 先做到“域名+时间”，再逐步做到“关联 app”
验证：
- 打开网站能看到域名记录
- verifier PASS